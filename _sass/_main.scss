/************************************************

Stylesheet: Main Stylesheet

*************************************************/





// TYPOGRAPHY
// -------------------------------------------------------------------------------------------------------------------


h1, h2, h3, h4, h5, h6 {margin-bottom: $header-margin-bottom;}

h2 {font-weight: 500;}

li {margin-bottom: $list-margin-bottom;}

a:not(.button) {
    &:hover {text-decoration: underline; color: $primary-color;}
}


// Button
// ------

.button {min-width: rem-calc(132);}

a:focus, button:focus {outline: none;}


// Bgs
// ------

.bg-grey {background-color: $lighter-gray;}



// Lead Text
// ------

.lead {font-size: $lead-font-size;}



// Centered Text
// ------

.text-center {text-align: center;}



// Blockquote
// ------

blockquote {
    p {margin-bottom: 0;}
    cite {}
}



// Horizontal List
// ------

.horizontal-list {@include horizontal_list();}



// Down Arrow
// ------

.cta-down:after {@include icon_font($char: $icon-arrow-down); display: inline-block; margin: .5rem auto; font-size: rem-calc(20);} 


// Anchor Links
// ------

a[title="View on Github"] {
    &:before {@include icon_font($char: $icon-github); display: inline-block; font-size: rem-calc(24); margin-right: .6rem; vertical-align: middle;}
    &:after {display: none !important;}
    &:hover {
        &:before {text-decoration: none;}
    }
}





// IMAGES, VIDEOS & GALLERIES
// -------------------------------------------------------------------------------------------------------------------


.img {position: relative; display: block; background: transparent no-repeat center/cover;}





// FORM STYLES
// -------------------------------------------------------------------------------------------------------------------


// input[type=checkbox] {display: none;

//     + label {position: relative; margin: 0; clear: none; cursor: pointer; line-height: rem-calc(24);
//         &:before {content: ""; display: inline-block; width: rem-calc(24); height: rem-calc(24); border: #{rem-calc(4) solid $white}; margin-right: 1em; background-color: $white; vertical-align: top;}
//     }
//     &:checked + label:before {background-color: $black;}
// }

.newsletter_errors {display: none;}
.newsletter_thanks {display: none;}

.form_group-agree {display: flex; flex-flow: row nowrap; align-items: flex-start;
    input[type=checkbox] {flex: 0 0 auto; margin: rem-calc(3 3 0 0);}
    label {flex: 1 1 auto; color: $white; font-size: $small-font-size;
        a {text-decoration: underline;}
    }
}

#newsletter_form {display: flex; flex-flow: row wrap; justify-content: space-between; max-width: rem-calc(460);
    > * {flex: 1 1 100%;
        &#newsletter_email {flex: 0 0 calc(100% - #{rem-calc(142)});}
        &#newsletter_privacy {order: 2;}
        &#newsletter_submit {flex: 0 0 #{rem-calc(132)};
            button {margin: 0;}
        }
    }
}





// FRAMEWORK
// -------------------------------------------------------------------------------------------------------------------


// Sticky Footer
// ------

html {height: 100%;}
.site {display: flex; flex-direction: column; height: 100%;}
.site-header,
.site-footer {flex: none;}
.site-content {flex: 1 0 auto; width: 100%;}



// Header
// ------

.site-header {position: absolute; z-index: 10; left: 0; top: 0; width: 100%; padding: rem-calc(12 0);
    .cell {display: flex; flex-flow: row nowrap; justify-content: space-between;}
}



// Logo
// ------

.logo {position: relative; margin: 0; font-size: rem-calc(15); line-height: 1; 
    a {position: relative; display: block; padding: rem-calc(15 0 14 41); color: $body-font-color;
        &:before {content: ""; position: absolute; left: 0; top: rem-calc(7); display: block; width: rem-calc(31); height: rem-calc(32); background: transparent url(img/firefox-logo.png) no-repeat center/contain;}
        &:hover {text-decoration: none; color: inherit;}
    }

    @include breakpoint(medium) {font-size: rem-calc(20);
        a {padding: rem-calc(15 0 14 58);
            &:before {top: 0; width: rem-calc(48); height: rem-calc(49);}
        }
    }
}



// Top Navigation
// ------

.site-nav {padding: rem-calc(9 0 8);
    @include breakpoint(small down) {display: none;}
}

.page-nav-container {position: absolute; z-index: 10; top: calc(100% - #{rem-calc(38)}); left: 0; width: 100%; 
    * {transform: translate3d(0,0,0);}
    .page-nav {position: absolute; left: 0; top: 0; width: 100%; 
        &:before {content: ""; display: block; position: absolute; left: 0; top: rem-calc(-75); width: 100%; height: rem-calc(75); pointer-events: none; opacity: 0; background-image: linear-gradient(rgba($black, .333) 0, rgba($black, 0) 100%); transition: top 0 ease-in-out;}
    }
    nav {position: relative; width: 100%; height: rem-calc(52); background-color: $white; box-shadow: #{rem-calc(0 4 16)} rgba(12,12,13,0.1); border-radius: $global-radius; margin: rem-calc(12 0); overflow: hidden;

        .group-a, .group-b {position: absolute; left: 0; top: 0; height: 100%; padding: rem-calc(0 10); display: flex; flex-flow: row nowrap; justify-content: space-between; align-items: stretch;}

        .group-a {width: 100%; transition: width .3s ease-in-out; 
            a {position: relative; padding: rem-calc(15 20); color: $body-font-color; margin: 0; line-height: rem-calc(22); white-space: nowrap; transition: font-size .3s ease-in-out;
                &:hover {color: $primary-color; text-decoration: none;}
                &.active {color: $primary-color;
                    &:after {content: ""; display: block; position: absolute; left: rem-calc(20); top: rem-calc(40); width: calc(100% - #{rem-calc(40)}); height: rem-calc(1); background-color: $primary-color;}
                }
            }
            @include breakpoint(large) {padding-left: rem-calc(20); padding-right: rem-calc(20);}
        }

        .group-b {width: rem-calc(155); left: auto; right: 0; display: flex; flex-flow: row nowrap; justify-content: flex-end; overflow: hidden; opacity: 0; margin-right: rem-calc(-155); padding: rem-calc(10 10 10 0); background-color: $white; transition: opacity .3s ease-in-out, margin .3s ease-in-out; 
            a.button {margin: rem-calc(0); margin-left: auto;}
        }

        .fwd, .bak {display: none;}
        
    }

    &.sticky .page-nav {position: fixed; top: 0;
        &:before {top: rem-calc(-20); opacity: 1; transition: top .2s ease-in-out, opacity .2s ease-in-out;}
    }

    @include breakpoint(medium) {

        .page-nav .grid-container {padding-left: 0; padding-right: 0;}

        nav {margin: rem-calc(12 0);
            .jump-link {display: none;}

            .group-a {overflow-x: hidden; overflow-y: hidden;
                @include breakpoint(medium only) {
                    &:hover {overflow-x: auto;} // -ms-overflow-style: -ms-autohiding-scrollbar;
                }
            }

            .fwd, .bak {visibility: hidden; pointer-events: none; position: absolute; z-index: 2; top: 0; height: 100%; width: rem-calc(64); display: flex; flex-flow: column nowrap; justify-content: center; align-items: center; cursor: pointer; font-size: rem-calc(16); text-align: center; color: $body-font-color; transition: left .3s ease-in-out, right .3s ease-in-out; 
                &:after {display: block; flex: 0 0 auto; padding: rem-calc(0 16);}
                &:hover {color: $primary-color;}
            }
            .fwd {right: 0; background-image: linear-gradient(to right, rgba($white, 0) 0, rgba($white, 1) 50%); align-items: flex-end;
                &:after {@include icon_font($char: $icon-arrow-right);}
            }
            .bak {left: 0; background-image: linear-gradient(to right, rgba($white, 1) 50%, rgba($white, 0) 100%); align-items: flex-start;
                &:after {@include icon_font($char: $icon-arrow-left);}
            }

            &.scrollable {
                .fwd, .bak {visibility: visible; pointer-events: auto;}
                &.start .bak {visibility: hidden; pointer-events: none;}
                &.end .fwd {visibility: hidden; pointer-events: none;}
            }
        }

        &.sticky nav {
            .group-a {width: calc(100% - #{rem-calc(155)});
                a {font-size: rem-calc(13);
                    &.active:after {top: rem-calc(38);}
                }
            }
            .group-b {opacity: 1; margin-right: 0;}

            .fwd {right: rem-calc(150);}
        }
    }

    @include breakpoint(small down) {
        nav {height: auto; min-height: rem-calc(52);
            .jump-link {position: absolute; z-index: 2; left: 0; top: 0; height: rem-calc(52); display: flex; flex-flow: row nowrap; justify-content: flex-start; align-items: center; padding: rem-calc(10 10 10 35); width: calc(100% - #{rem-calc(155)}); font-weight: $global-weight-normal; background-color: $white; margin: 0; cursor: pointer;
                &:after {@include icon_font($char: $icon-arrow-down); display: block; flex: 0 1 #{rem-calc(22)}; width: rem-calc(22); padding: rem-calc(3 0 3 6); font-size: rem-calc(16);}
            }

            .group-a {display: none; z-index: 1; height: auto; position: relative; margin-top: rem-calc(54); padding: rem-calc(12 10); border-top: 1px solid $medium-gray; 
                a {display: block; padding: rem-calc(8 0 8 25); font-size: rem-calc(15);
                    &.active {color: $body-font-color;
                        &:after {content: ""; display: block; position: absolute; left: rem-calc(12); top: rem-calc(11); bottom: auto; width: rem-calc(1); height: rem-calc(16); background-color: $primary-color;}
                    }
                }
            }
            .group-b {z-index: 2; opacity: 1; margin-right: 0; height: rem-calc(52);}

            &.open {
                .jump-link {
                    &:after {@include icon_font($char: $icon-arrow-up);}
                }
            }
        }
    }

    
}




// COMPONENT STYLES
// -------------------------------------------------------------------------------------------------------------------


// Transition Elements
// ------

.showOnView {opacity: 0; box-shadow: 0 0 1px rgba(0, 0, 0, 0);} // box shadow hack to remove redraw pixels



// Panel
// -------

.panel {position: relative; padding-top: rem-calc(20); padding-bottom: rem-calc(20); 
    @include breakpoint(medium) {padding-top: rem-calc(60); padding-bottom: rem-calc(60);}
}



// Into Banner
// ------

.banner.intro {position: relative; background: $white no-repeat center/cover; height: calc(100vh - #{rem-calc(120)}); min-height: 100vw; max-height: 200vw;
    @include breakpoint(medium) {height: calc(100vh - #{rem-calc(50)}); min-height: rem-calc(300); max-height: 60vw;}

    .graphic-bg {position: absolute; left: 0; top: 0; width: 100%; height: 100%; z-index: 1; overflow: hidden;
        > * {position: absolute; left: 0; top: 0; width: 100%; height: 100%; background: transparent no-repeat center/contain;
            &.left {background: transparent no-repeat -15% 100%/45%;}
            &.right {background: transparent no-repeat 110% 100%/65%;}
        }
        @include breakpoint(medium only) {
            > .left {background: transparent no-repeat -20% 100%/40%;}
            > .right {background: transparent no-repeat 115% 100%/60%;}
        }
        @include breakpoint(small down) {
            > .left {background: transparent no-repeat -25% 100%/60%;}
            > .right {background: transparent no-repeat 115% 100%/80%;}
        }
    }

    .banner-content {height: 80%; position: relative; z-index: 2;
        .cell {
            > * {max-width: rem-calc(400); margin-left: auto; margin-right: auto;}
            > h1 {max-width: rem-calc(280);}
        }
    }

    + section .section-intro {padding-top: rem-calc(64);
        @include breakpoint (medium) {padding-top: rem-calc(96);}
        @include breakpoint (large) {padding-top: rem-calc(124);}
    }

}



// Section Intro
// ------

.section-intro {padding-top: rem-calc(32); padding-bottom: rem-calc(20); background-color: #f8e71c;
    
    > .tiles-outside:first-child {padding-top: rem-calc(0);}
    > .tiles-outside:last-child {padding-bottom: rem-calc(0);}

    @include breakpoint (medium) {padding-top: rem-calc(48); padding-bottom: rem-calc(30);}
    @include breakpoint (large) {padding-top: rem-calc(64); padding-bottom: rem-calc(40);}

    &.extra-space {padding-bottom: rem-calc(24);
        @include breakpoint (medium) {padding-bottom: rem-calc(32);}
        @include breakpoint (large) {padding-bottom: rem-calc(64);}
    }

    + .section-tiles {padding-bottom: 1px;
        .tiles-outside:first-child {background-color: #f8e71c;}
        .tiles-container {position: relative; padding-bottom: 1px; margin-bottom: calc(5.6652083333333vw * 2); background-color: #f8e71c;
            .grid-container {margin-bottom: calc(-5.6652083333333vw * 2);}

            &:after {content: ""; display: block; position: absolute; left: 0; bottom: -5.6652083333333vw; height: 6.081875vw; width: 100vw; background: transparent no-repeat center/cover; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 960 58.39'%3E%3Cdefs%3E%3Cstyle%3E.bg-1%7Bfill:%23f8e71c;%7D%3C/style%3E%3C/defs%3E%3Cpath class='bg-1' d='M0,494.21c108.92,32.92,283.14,54.24,479.5,54.24,197,0,371.65-21.45,480.5-54.55v-3.84H0Z' transform='translate(0 -490.06)'/%3E%3C/svg%3E");}
            + * {position: relative;}
        }
    }

    &.bg-dark {background-color: $primary-color; color: $white; 
        > .grid-container > .cell:not(.tile):not(.tile-compact) > p > a, 
        .over-dark a,
        .tiles-outside a {color: $white;
            &:last-child {
                &:after {display: inline-block; margin-left: .3em; font-size: .8em; transition: margin .2s ease-in-out;
                    @include icon_font($char: $icon-arrow-right);
                }
                &:hover {
                    &:after {margin-left: .5em; margin-right: -.2em;}
                }
            }
        }
    
        + .section-tiles {
            .tiles-outside:first-child {background-color: $primary-color; color: $white;}
            .tiles-container {background-color: $primary-color; color: $white;
                &:after {background: transparent no-repeat center/cover; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 960 58.39'%3E%3Cdefs%3E%3Cstyle%3E.bg-1%7Bfill:%230060df;%7D%3C/style%3E%3C/defs%3E%3Cpath class='bg-1' d='M0,494.21c108.92,32.92,283.14,54.24,479.5,54.24,197,0,371.65-21.45,480.5-54.55v-3.84H0Z' transform='translate(0 -490.06)'/%3E%3C/svg%3E");}
            }
        }
    }

    &.bg-alt1 {background-color: #6200a4;

        + .section-tiles {
            .tiles-outside:first-child {background-color: #6200a4;}
            .tiles-container {background-color: #6200a4;
                &:after {background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 960 58.39'%3E%3Cdefs%3E%3Cstyle%3E.bg-1%7Bfill:%236200a4;%7D%3C/style%3E%3C/defs%3E%3Cpath class='bg-1' d='M0,494.21c108.92,32.92,283.14,54.24,479.5,54.24,197,0,371.65-21.45,480.5-54.55v-3.84H0Z' transform='translate(0 -490.06)'/%3E%3C/svg%3E");}
            }
        }
    }

    &.bg-alt2 {background-color: #ff9400;

        + .section-tiles {
            .tiles-outside:first-child {background-color: #ff9400;}
            .tiles-container {background-color: #ff9400;
                &:after {background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 960 58.39'%3E%3Cdefs%3E%3Cstyle%3E.bg-1%7Bfill:%23ff9400;%7D%3C/style%3E%3C/defs%3E%3Cpath class='bg-1' d='M0,494.21c108.92,32.92,283.14,54.24,479.5,54.24,197,0,371.65-21.45,480.5-54.55v-3.84H0Z' transform='translate(0 -490.06)'/%3E%3C/svg%3E");}
            }
        }
    }
}



// Section More
// ------

.section-more {padding-top: rem-calc(32); padding-bottom: rem-calc(20);
    @include breakpoint (medium) {padding-top: rem-calc(48); padding-bottom: rem-calc(30);}
    @include breakpoint (large) {padding-top: rem-calc(64); padding-bottom: rem-calc(40);}

    &.extra-space {padding-bottom: rem-calc(24);
        @include breakpoint (medium) {padding-bottom: rem-calc(32);}
        @include breakpoint (large) {padding-bottom: rem-calc(64);}
    }
}



// Tiles
// ------

.cell.tile {position: relative; z-index: 3; padding: rem-calc(20 26) !important; margin: rem-calc(8 0); color: $body-font-color; 
    &:before {content:""; display: block; position: absolute; left: rem-calc(6); width: calc(100% - #{rem-calc(12)}); top: 0; height: 100%; background-color: $white; border-radius: $global-radius; box-shadow: #{rem-calc(0 4 16)} rgba(12,12,13,0.1);}

    > * {position: relative; z-index: 2;}

    img {display: block; max-height: rem-calc(120); margin: 0 auto;}

    &:not(.tile-block-link) {
        a img {border-radius: $global-radius; transition: transform .2s ease-in-out, box-shadow .2s ease-in-out;}
        a:hover img {box-shadow: #{rem-calc(0 4 16)} rgba(12,12,13,0.1); transform: scale(1.01);}
    }

    &.tile-block-link {cursor: pointer;

        .block-link-inline {color: $primary-color;}

        &:hover {color: $body-font-color; text-decoration: none;
            .block-link-inline {text-decoration: underline;}
        }
    }

    @include breakpoint(medium) {padding: rem-calc(24 34 30) !important; margin: rem-calc(12 0);
        &:before {left: rem-calc(12); width: calc(100% - #{rem-calc(24)});}

        &:not(.tile-block-link) { display: flex; flex-flow: column nowrap; justify-content: stretch;
            > * {flex: 0 0 auto; width: 100%;
                &:last-child {flex: 1 1 auto; display: flex; flex-flow: column; justify-content: flex-end; margin-bottom: 0;}
            }
        }

        &.tile-block-link {
            .block-link {height: 100%; display: flex; flex-flow: column nowrap; justify-content: stretch;
                > * {flex: 0 0 auto; width: 100%;
                    &:last-child {flex: 1 1 auto; display: flex; flex-flow: column; justify-content: flex-end; margin-bottom: 0;}
                }
            }
        }
    }

    @include breakpoint(medium only) {

        &:not(.tile-block-link) {
            &:not(.medium-6):not(.no-img) {
                > * {max-width: 70%;
                    &:first-child {position: absolute; top: rem-calc(12); right: rem-calc(12); max-width: 24%;}
                }
            }
        }

        &.tile-block-link {
            &:not(.medium-6):not(.no-img) .block-link {
                > * {max-width: 70%;
                    &:first-child {position: absolute; top: rem-calc(12); right: rem-calc(12); max-width: 24%;}
                }
            }
        }
    }   

    @include breakpoint(large) {
        &:not(.tile-block-link) {
            &.medium-6:not(.no-img) {
                > * {max-width: 70%;
                    &:first-child {position: absolute; top: rem-calc(12); right: rem-calc(12); max-width: 24%;}
                }
            }
        }

        &.tile-block-link {
            &:before {will-change: transform; transition: transform .2s ease-in-out, box-shadow .2s ease-in-out;}
            &:hover:before {box-shadow: #{rem-calc(0 4 20)} rgba(12,12,13,0.33); transform: scale(1.01);}

            &.medium-6:not(.no-img) .block-link {
                > * {max-width: 70%;
                    &:first-child {position: absolute; top: rem-calc(12); right: rem-calc(12); max-width: 24%;}
                }
            }
        }
    }

}

.tile-compact {position: relative; z-index: 3; padding: rem-calc(20 26) !important; margin: rem-calc(8 0); color: $body-font-color;
    &:before {content:""; display: block; position: absolute; left: rem-calc(6); width: calc(100% - #{rem-calc(12)}); top: 0; height: 100%; background-color: $white; border-radius: $global-radius; box-shadow: #{rem-calc(0 4 16)} rgba(12,12,13,0.1);}

    > * {position: relative; z-index: 2;
        &:last-child {margin-bottom: 0;}
    }

    &:not(.tile-block-link) > * {
        &:first-child {position: absolute; top: rem-calc(12); right: rem-calc(24); width: rem-calc(32);
            img {width: rem-calc(32);}
        }
    }

    &.tile-block-link {padding: 0 !important;

        .block-link {padding: rem-calc(20 26) !important;
            > * {
                &:first-child {position: absolute; top: rem-calc(12); right: rem-calc(24); width: rem-calc(32);
                    img {width: rem-calc(32);}
                }
                &:last-child {margin-bottom: 0;}
            }
        }

        .block-link-inline {color: $primary-color;}

        &:hover {color: $body-font-color; text-decoration: none;
            .block-link-inline {text-decoration: underline;}
        }
    }

    @include breakpoint(medium) {padding: rem-calc(24 34 30) !important; margin: rem-calc(12 0);
        &:before {left: rem-calc(12); width: calc(100% - #{rem-calc(24)});}

        &:not(.tile-block-link) {display: flex; flex-flow: column nowrap; justify-content: stretch;
            > * {flex: 0 0 auto; align-items: flex-end; width: calc(100% - #{rem-calc(50)}); margin-right: 0; margin-left: auto;
                &:first-child {width: rem-calc(32); top: rem-calc(24); left: rem-calc(34); right: auto;}
                &:last-child {flex: 1 1 auto; display: flex; flex-flow: column; justify-content: flex-end; margin-bottom: 0;}
            }
        }

        &.tile-block-link {padding: 0 !important;
            .block-link {height: 100%; display: flex; flex-flow: column nowrap; justify-content: stretch; padding: rem-calc(24 34 30) !important; 
                > * {flex: 0 0 auto; align-items: flex-end; width: calc(100% - #{rem-calc(50)}); margin-right: 0; margin-left: auto;
                    &:first-child {top: rem-calc(24); left: rem-calc(34); right: auto;}
                    &:last-child {flex: 1 1 auto; display: flex; flex-flow: column; justify-content: flex-end; align-items: flex-start; margin-bottom: 0;}
                }
            }
        }
    }

    @include breakpoint(large) {
        &.tile-block-link {
            &:before {will-change: transform; transition: transform .2s ease-in-out, box-shadow .2s ease-in-out;}
            &:hover:before {box-shadow: #{rem-calc(0 4 20)} rgba(12,12,13,0.33); transform: scale(1.01);}
        }
    }

}

.tile-borderless {position: relative; z-index: 3; padding: rem-calc(20 30) !important; margin: rem-calc(10 0); color: $body-font-color; text-align: center;

    img {display: block; max-height: rem-calc(108); margin: 0 auto;}
    a img {border-radius: $global-radius; transition: box-shadow .2s ease-in-out;}
    a:hover img {box-shadow: #{rem-calc(0 4 16)} rgba(12,12,13,0.33);}

    @include breakpoint(medium) {padding: rem-calc(24 34 30) !important; margin: rem-calc(12 0); display: flex; flex-flow: column nowrap; justify-content: stretch;
        > * {flex: 0 0 auto; width: 100%;
            &:last-child {flex: 1 1 auto; display: flex; flex-flow: column; justify-content: flex-end; margin-bottom: 0;}
        }

        &.medium-6 {
            img {max-height: rem-calc(134);}
        }
    }
    > * {position: relative; z-index: 2;}
}

.tile-extended {
    > p a {@include button(); font-size: 0.733333333333333rem; padding: rem-calc(6 8);
        &:hover {text-decoration: none;}
    }
    .secondary-actions {font-size: $small-font-size;
        a {display: block; padding-top: rem-calc(6);}
    }
}

.tiles-outside {padding-top: rem-calc(10); padding-bottom: rem-calc(20); 
    &:first-child {
        *:last-child {margin-bottom: 0;}
        @include breakpoint(small down) {padding-top: rem-calc(24); padding-bottom: rem-calc(6);}
    }
    &:last-child p:not(:last-child) {margin-bottom: .5rem;}
    @include breakpoint(medium) {padding-top: rem-calc(24); padding-bottom: rem-calc(24);}
}



// Popup Panel
// ------

.popup-panel {display: none; max-width: rem-calc(460); position: fixed; z-index: 9; padding: rem-calc(20 38) !important; margin: rem-calc(8 0); color: $body-font-color;
    &:before {content:""; display: block; position: absolute; left: rem-calc(12); width: calc(100% - #{rem-calc(24)}); top: 0; height: 100%; background-color: $white; border-radius: $global-radius; box-shadow: #{rem-calc(0 4 16)} rgba(12,12,13,0.1);}

    > * {position: relative; z-index: 2;
        &:first-child {display: none;}
        &:nth-last-child(2) {margin-bottom: 0;}
        &:last-child {position: absolute; top: rem-calc(12); right: rem-calc(20);
            button {color: $medium-gray; font-size: rem-calc(24); cursor: pointer;
                &:before {@include icon_font($char: $icon-close);}
                &:hover {color: $primary-color;}
            }
        }
    }

    @include breakpoint(medium) {padding: rem-calc(24 34 30) !important; margin: rem-calc(12 0); 

        > *:not(:last-child) {width: calc(100% - #{rem-calc(50)}); margin-right: 0; margin-left: auto;
            &:first-child {display: block; position: absolute; width: rem-calc(32); top: rem-calc(24); left: rem-calc(34); 
                img {width: rem-calc(32);}
            }
        }
    }

}



// Mobile slideshow tiles
// ------

.slick-dots {position: relative; z-index: 3; list-style: none; display: flex; flex-flow: row nowrap; justify-content: center; margin: rem-calc(10 0); height: rem-calc(8);
    > * {flex: 0 0 #{rem-calc(20)}; width: rem-calc(20); height: rem-calc(8); margin: 0; display: flex; flex-flow: row nowrap; justify-content: center;
        button {flex: 0 0 #{rem-calc(8)}; width: rem-calc(8); height: rem-calc(8);  font-size: 0; border-radius: 50%; text-align: center; background-color: #99b8dc; cursor: pointer; transition: transform .2s ease-in-out;
            &:hover {transform: scale(1.3);}
        }
        &.slick-active button {background-color: $primary-color; pointer-events: none;}
    }
}

.mobile-slider,
.news-slider {
    @include breakpoint(medium down) {padding: rem-calc(0 0 1); margin-bottom: calc(#{5.6652083333333vw * 5} + #{rem-calc(96)}) !important;

        .grid-container {padding: rem-calc(0 0 1); margin-bottom: calc(#{-5.6652083333333vw * 5} + #{rem-calc(-96)}) !important;

            .slick-list {position: relative; z-index: 2;}

            .slick-track {display: flex; align-items: stretch;
                .slick-slide {display: flex; flex-flow: column nowrap; justify-content: stretch; height: auto; padding: rem-calc(20 28) !important; margin: rem-calc(16 0 20 0);
                    &:before {content:""; display: block; position: absolute; left: rem-calc(8); width: calc(100% - #{rem-calc(16)}); }

                    > * {flex: 0 0 auto; width: 100%;
                        &:last-child {flex: 1 1 auto; display: flex; flex-flow: column; justify-content: flex-end; margin-bottom: 0;}
                    }
                }
            }
        }
    }
}




// Section cta
// ------

.section-cta {position: relative;
    
    .img {position: absolute; left: 0; top: 0; width: 100%; height: 100%;
        @include breakpoint(small down) {background-position: left bottom; background-size: 100%;}
    }

    .grid-container {position: relative; min-height: 48vw; padding-top: rem-calc(45); padding-bottom: 24vw;
        @include breakpoint(medium) {min-height: 24vw; padding-bottom: rem-calc(45);}
    }

    .cell {
        > *:last-child {margin-bottom: 0;}
        @include breakpoint(medium) {max-width: rem-calc(360);}
    }

    a:last-child {
        &:after {display: inline-block; margin-left: .3em; font-size: .8em; transition: margin .2s ease-in-out;
            @include icon_font($char: $icon-arrow-right);
        }
        &:hover:after {margin-left: .5em; margin-right: -.2em;}
    }

    &.bg-dark {color: $white; 
        a {color: $white;}
    }


}



// Video Box
// ------

#stdVideo {opacity: 0; pointer-events: none; position: absolute; z-index: 11; overflow: hidden; left: 0; top: calc(100% + 1px); width: 100%; height: 1px; background: rgba(0,0,0,.85); transition: left .3s ease-in-out, top .3s ease-in-out, width .3s ease-in-out, height .3s ease-in-out, opacity .3s ease-in-out; 
    iframe, object, embed, video {position: absolute; top: 0; left: 0; width: 100%; height: 100%;}
    .flex-video {position: absolute; top: 0; left: 0; width: 100%; height: 100%;}

    #stdVideo-close {z-index: 3; position: absolute; top: rem-calc(15); right: rem-calc(15); font-size: rem-calc(22); color: $white; background-color: $secondary-color; width: rem-calc(32); height: rem-calc(32); border-radius: 50%; box-shadow: #{rem-calc(0 1 3)} rgba($black,.33); cursor: pointer; text-align: center; transition: transform .15s ease-in-out;
        &:before {@include icon_font($char: $icon-close); display: block; line-height: rem-calc(32);}
        &:hover {transform: scale(1.1);}
        @include breakpoint(large) {top: rem-calc(30); right: rem-calc(30); font-size: rem-calc(36); width: rem-calc(48); height: rem-calc(48);
            &:before {line-height: rem-calc(48);}
        }
    }

    &.playing {opacity: 1; left: 0; top: 0; width: 100%; height: 100%; pointer-events: auto;}
}

.video-box {position: relative; 

    .h1 {
        @include breakpoint(small down) {text-align: center; font-size: rem-calc(15); margin-top: rem-calc(24);}
    }
    
    .video-play {display: block; position: relative; overflow: hidden; display: block; width: rem-calc(48); height: rem-calc(48); margin: 1em 0; text-align: center; line-height: rem-calc(48); font-size: rem-calc(26); color: $primary-color; background-color: $white; border-radius: 50%; box-shadow: #{rem-calc(0 2 8)} rgba(12,12,13,0.1); cursor: pointer; transition: color .2s ease-in-out, box-shadow .2s ease-in-out, transform .2s ease-in-out;
        &:before {@include icon_font($char: $icon-play);}
        &:hover {color: $primary-color-hover; box-shadow: #{rem-calc(0 2 8)} rgba(12,12,13,0.33);}

        &.loading {background-color: $primary-color; color: $white;
            &:before {content: ""; position: absolute; left: 0; top: 0; width: 100%; height: 100%; background: transparent url(img/ajax-loader.svg) no-repeat center/86%;}
        }
    }

    .img {position: relative; z-index: 1; height: 0; padding-bottom: 56.25%; margin: rem-calc(20 0 10); box-shadow: #{rem-calc(0 4 16)} rgba(12,12,13,0.1); border-radius: $global-radius; overflow: hidden;

        .video-play {position: absolute; top: calc(50% - #{rem-calc(16)}); left: calc(50% - #{rem-calc(16)}); width: rem-calc(32); height: rem-calc(32); line-height: rem-calc(32); font-size: rem-calc(16); margin: 0;
            @include breakpoint(medium) {display: none;}
        }
        .video-link {position: absolute; top: 0; left: 0; right: 0; bottom: 0;}

        &.loading {
            @include breakpoint(small down) {
                .video-play {background-color: $primary-color; color: $white;
                    &:before {content: ""; position: absolute; left: 0; top: 0; width: 100%; height: 100%; background: transparent url(img/ajax-loader.svg) no-repeat center/86%;}
                }
            }
        }
    }

    @include breakpoint(medium) {margin: rem-calc(16 0);
        .video-cta {position: absolute; z-index: 2; left: 0; top: 0; width: 70%; height: 100%; padding: 10%; display: flex; flex-flow: column nowrap; justify-content: center; transition: opacity .3s ease-in-out;
            &.playing {opacity: 0; pointer-events: none;}
        }
    }
}

#video-popup {display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 100; background: rgba(0,0,0,.8);
    .bg {position: absolute; left: 0; top: 0; width: 100%; height: 100%;}
    .grid-container {height: 100%; position: relative; z-index: 3; pointer-events: none;
        .cell {pointer-events: auto;}
    }
    #stdVideo {position: relative; height: 0; padding: 0; background: $white; transition: left .3s ease-in-out, top .3s ease-in-out, width .3s ease-in-out, height .3s ease-in-out, padding .3s ease-in-out, opacity .3s ease-in-out; 
        &.playing {opacity: 1; height: auto; padding-bottom: 56.25%;}
    }
    &.loading {
        &:before {content: ""; position: absolute; z-index: 2; left: calc(50% - #{rem-calc(32)}); top: calc(50% - #{rem-calc(32)}); width: rem-calc(64); height: rem-calc(64); background: transparent url(img/ajax-loader.svg) no-repeat center/100%;}
    }
}



// Inline resource list
// ------

.resources-inline-list {
    @include breakpoint(medium) {
        p {display: flex; flex-flow: row wrap; justify-content: space-between;}
    }
    @include breakpoint(small down) {
        p a {display: block; padding-top: rem-calc(6);}
    }
}



// Interative Anatomy Illustration
// ------

.anatomy-container {
    .anatomy-illustration {text-align: center;
        #anatomy-of-an-extension-graphic {display: none;}
    }
    .anatomy-description {position: relative; display: flex; flex-flow: column nowrap; justify-content: center; 
        #anatomy-of-an-extension-graphic-mobile {display: none;}

        button {position: relative; display: block; padding: rem-calc(16 24); text-align: left; color: $primary-color; cursor: pointer;

            &:after {display: inline-block; margin-left: .3em; font-size: .8em; transition: margin .2s ease-in-out;
                @include icon_font($char: $icon-arrow-right);
            }
            &:hover {text-decoration: underline; 
                &:after {margin-left: .5em; margin-right: -.2em;}
            }

            img {margin-right: rem-calc(16);}
        }
    }

    .manifest {text-align: center;
        img {display: inline-block; margin-right: .3em;}
    }

    @include breakpoint(medium) {display: flex; flex-flow: row nowrap; justify-content: stretch;
        .anatomy-illustration {flex: 0 0 70%;
            #anatomy-of-an-extension-graphic {display: block; margin: #{rem-calc(32)} auto 0; max-width: 100%;
                .tile {cursor: pointer; transition: transform .3s ease-in-out, opacity .3s ease-in-out;
                    &.hover {transform: translate(#{rem-calc(8)},0);}
                }

                + .manifest {transition: opacity .3s ease-in-out;}

                #box_bottom_back {transition: transform .3s ease-in-out, opacity .3s .15s ease-in-out;}
                #box_bottom_front {transition: transform .3s ease-in-out;}
                #box_top_back {transition: transform .3s ease-in-out;}
                #box_top_front_transparent {transition: transform .3s ease-in-out;}
                #box_top_front_solid {transition: transform .3s ease-in-out, opacity .3s ease-in-out; opacity: 0;}
                #box_sides {transition: transform .3s ease-in-out;}

                &:not(.step-one) {
                    #box_bottom_back {transform: translateY(calc(50% - #{rem-calc(115)})) scale(1, 0.294871794871795); opacity: 0;}
                    #box_bottom_front {transform: translateY(#{rem-calc(-110)});}
                    #box_top_back {transform: translateY(#{rem-calc(110)});}
                    #box_top_front_transparent {transform: translateY(#{rem-calc(110)});}
                    #box_top_front_solid {transform: translateY(#{rem-calc(110)}); opacity: 1;}
                    #box_sides {transform: translateY(calc(50% - #{rem-calc(74)})) scale(1, 0.294871794871795);}
                }
                &:not(.step-two) {
                    #background {transform: translateY(#{rem-calc(-30)}); opacity: 0;}
                    #content {opacity: 0;}
                    #interface {transform: translateY(#{rem-calc(30)}); opacity: 0;}
                    + .manifest {opacity: 0;}
                }
            }
        }
        .anatomy-description {flex: 0 0 30%;
            button {margin: rem-calc(15 0);}
        }
        #anatomy-control {
            button {transition: opacity .3s .15s ease-in-out, transform .3s ease-in-out;}
            &:not(.step-two) {
                button {opacity: 0;
                    &:first-of-type {transform: translateY(#{rem-calc(30)});}
                    &:last-of-type {transform: translateY(#{rem-calc(-30)});}
                }
            }
        }
    }

    @include breakpoint(small down) {
        .anatomy-description {height: calc(157.037037037037vw - 24px); padding: 36.5% 0; margin: rem-calc(16 0 8); align-items: center; justify-content: space-between;
            #anatomy-of-an-extension-graphic-mobile {display: block; position: absolute; left: 0; top: 0; right: 0; bottom: 0;
                #mobile-box_bottom_back {opacity: .2;}
                #mobile-box_top_front_solid {opacity: .2;}
            }

            button {margin: rem-calc(0 0 -20);}
        }
    }
}



// Events
// ------

#events {margin-bottom: -1px; overflow: hidden;}



// RSS Feed
// ------

#rss-feed-source {display: none;}
#rss-feed {}



// Social Panel
// ------

.social {background-color: #363959; color: $white; font-size: $small-font-size;
    h4 {margin-top: rem-calc(10);}
    p {color: #b1b1b3;}
    a {color: $white;
        &:before {display: inline-block;}
        &:hover {color: $white;
            &:before {text-decoration: none;}
        }
        &.twitter:before {@include icon_font($char: $icon-twitter); font-size: rem-calc(24); vertical-align: middle; margin-right: .3em;}
        &.telegram:before {@include icon_font($char: $icon-telegram); font-size: rem-calc(24); vertical-align: middle; margin-right: .3em;}
        &.irc:before {@include icon_font($char: $icon-irc); font-size: rem-calc(24); vertical-align: middle; margin-right: .3em;}
        &.mailinglist:before {@include icon_font($char: $icon-mail); font-size: rem-calc(24); vertical-align: middle; margin-right: .3em;}
    }
    input[type=text], input[type=email] {background-color: rgba(#b1b1b3,.2); border: 0; color: $white;
        &::placeholder {color: #b1b1b3;}
    }
    .button {background-color: $white; color: $primary-color; margin-top: rem-calc(16);
        &:hover {background-color: $light-gray;}
    }

    @include breakpoint(medium down) {
        .cell {padding-top: rem-calc(8); padding-bottom: rem-calc(8);}
    }
}


// Moz Footer
// ------


.site-footer {background-color: $black; color: $white;
    @include breakpoint(medium down) {padding-top: rem-calc(40); padding-bottom: rem-calc(40);}

    a {color: $white;
        &:hover {color: $white;}
    }

    h4 {
        @include breakpoint(medium down) {margin-top: 1.5em;}
    }

    ul {list-style: none; margin: 0;}

    .mzp-c-footer-links-social {@include horizontal_list($margin: .6666em);
        a {font-size: 0;
            &:before {display: inline-block; font-size: rem-calc(20); vertical-align: middle;}
            &:hover {text-decoration: none;}
        }
        .twitter:before {@include icon_font($char: $icon-twitter);}
        .instagram:before {@include icon_font($char: $icon-instagram);}
        .youtube:before {@include icon_font($char: $icon-youtube);}
    }

    .mzp-c-footer-legal ul {@include horizontal_list($margin: 1em); margin-bottom: 1em;
        a {
            &:hover {text-decoration: underline;}
        }
    }

    .mzp-c-footer-primary-logo {margin-bottom: rem-calc(16); padding-right: rem-calc(24);
        a {display: inline-block; width: 100px; height: 32px; overflow: hidden; text-decoration: none; text-indent: 120%; white-space: nowrap; background: $black url("img/moz-logo.svg") no-repeat 0 0/#{rem-calc(100)}; color: $white;}
    }

    .mzp-c-footer-secondary {font-size: $small-font-size; line-height: 1.333; padding-top: rem-calc(40);
        @include breakpoint(large) {padding-top: rem-calc(60);}
    }

    .mzp-c-language-switcher {display: flex; flex-flow: row wrap; justify-content: flex-start; font-size: 1rem; align-items: center;
        label {position: absolute; width: 1px; height: 1px; overflow: hidden; margin: -1px;}
        .mzp-c-cta-link {flex: 0 0 auto; margin-right: rem-calc(24); font-weight: $global-weight-bold;}
        select {flex: 0 0 auto; width: auto; margin-bottom: 0;}
    }


}


